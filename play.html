<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Playing Game | PlayForge</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <nav class="navbar">
        <div class="logo-container"><img src="assets/game/logo.png" alt="PlayForge"></div>
        <a href="games.html" class="btn-secondary">Exit Game</a>
    </nav>

    <div class="container" style="text-align: center;">
        <div class="ad-slot">ADVERTISEMENT - RESPONSIVE BANNER</div>
        
        <div id="game-container" style="width: 100%; max-width: 900px; height: 500px; background: #000; margin: 0 auto; position: relative;">
            <iframe id="game-frame" src="" style="width: 100%; height: 100%; border: none;"></iframe>
        </div>

        <div class="ad-slot">ADVERTISEMENT - VIDEO AD READY</div>
        
        <div style="margin-top: 20px; text-align: left;">
            <h1 id="game-title">Game Title</h1>
            <p id="game-dev" style="color: var(--primary);">By Developer</p>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-firestore-compat.js"></script>
    <script src="firebase-config.js"></script>
    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const gameId = urlParams.get('id');

        if(gameId) {
            db.collection('games').doc(gameId).get().then(doc => {
                const data = doc.data();
                document.getElementById('game-frame').src = data.gameUrl;
                document.getElementById('game-title').innerText = data.title;
                // Add view for revenue calculation
                db.collection('games').doc(gameId).update({ views: firebase.firestore.FieldValue.increment(1) });
            });
        }
    </script>
</body>
</html>
